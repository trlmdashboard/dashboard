<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Dashboard - SHG & Individual Loans</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <style>
        :root {
            --shg-color: #4361ee;
            --individual-color: #f72585;
            --submitted-color: #4cc9f0;
            --sanctioned-color: #7209b7;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        .dashboard-header {
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
            color: white;
            padding: 1.5rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 10px 10px;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            border: none;
        }
        .card-header {
            background-color: #fff;
            border-bottom: 1px solid #eaeaea;
            font-weight: 600;
        }
        .stat-card {
            text-align: center;
            padding: 1.5rem;
            transition: transform 0.3s;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .shg-card {
            border-top: 4px solid var(--shg-color);
        }
        .individual-card {
            border-top: 4px solid var(--individual-color);
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }
        .filter-section {
            background-color: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .legend-item {
            display: inline-block;
            margin-right: 15px;
            font-size: 0.85rem;
        }
        .legend-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 5px;
            border-radius: 2px;
        }
        .date-navigation {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .date-btn {
            margin: 0 5px;
        }
        .table-responsive {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <div class="container">
            <h1 class="text-center">Loan Dashboard</h1>
            <p class="text-center mb-0">SHG & Individual Loans - District and Block Wise Analysis</p>
        </div>
    </div>

    <div class="container">
        <!-- Filters -->
        <div class="row filter-section">
            <div class="col-md-4 mb-2">
                <label for="districtFilter" class="form-label">District</label>
                <select class="form-select" id="districtFilter">
                    <option value="">All Districts</option>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <label for="blockFilter" class="form-label">Block</label>
                <select class="form-select" id="blockFilter">
                    <option value="">All Blocks</option>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <label for="dateFilter" class="form-label">Date Range</label>
                <select class="form-select" id="dateFilter">
                    <option value="all">All Dates</option>
                    <option value="august">August 2025</option>
                    <option value="september">September 2025</option>
                    <option value="last7">Last 7 Days</option>
                </select>
            </div>
        </div>

        <!-- Summary Statistics -->
        <div class="row">
            <div class="col-md-3">
                <div class="card stat-card shg-card">
                    <div class="stat-value" id="totalShgSubmitted">0</div>
                    <div class="stat-label">SHG Loans Submitted</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card shg-card">
                    <div class="stat-value" id="totalShgSanctioned">0</div>
                    <div class="stat-label">SHG Loans Sanctioned</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card individual-card">
                    <div class="stat-value" id="totalIndividualSubmitted">0</div>
                    <div class="stat-label">Individual Loans Submitted</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card individual-card">
                    <div class="stat-value" id="totalIndividualSanctioned">0</div>
                    <div class="stat-label">Individual Loans Sanctioned</div>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Daily Loan Trends</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="dailyTrendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Loan Distribution by Type</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="loanDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">District-wise Comparison</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="districtChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Submission vs Sanction Rate</div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="sanctionRateChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Table -->
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Detailed Loan Data</span>
                <div>
                    <span class="legend-item"><span class="legend-color" style="background-color: var(--shg-color);"></span>SHG</span>
                    <span class="legend-item"><span class="legend-color" style="background-color: var(--individual-color);"></span>Individual</span>
                    <span class="legend-item"><span class="legend-color" style="background-color: var(--submitted-color);"></span>Submitted</span>
                    <span class="legend-item"><span class="legend-color" style="background-color: var(--sanctioned-color);"></span>Sanctioned</span>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover" id="loanTable">
                        <thead>
                            <tr>
                                <th>District</th>
                                <th>Block</th>
                                <th>Date</th>
                                <th>Loan Type</th>
                                <th>Submitted (#)</th>
                                <th>Submitted (Amt)</th>
                                <th>Sanctioned (#)</th>
                                <th>Sanctioned (Amt)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let rawData = [];
        let filteredData = [];
        let dailyTrendChart, loanDistributionChart, districtChart, sanctionRateChart;

        // Load data from Google Sheets
        function loadData() {
            const sheetUrl = 'https://docs.google.com/spreadsheets/d/1W1cj-tYfliz4hudnNU0O8W6oXaNasL5fKlyvk-Y-h2I/gviz/tq?tqx=out:csv&sheet=jsondata';
            
            Papa.parse(sheetUrl, {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    rawData = processData(results.data);
                    initializeFilters();
                    applyFilters();
                }
            });
        }

        // Process the raw CSV data into a more usable format
        function processData(data) {
            const processedData = [];
            const dates = [];
            
            // Generate date array from August 1 to September 7, 2025
            for (let day = 1; day <= 31; day++) {
                dates.push(`2025-08-${day.toString().padStart(2, '0')}`);
            }
            for (let day = 1; day <= 7; day++) {
                dates.push(`2025-09-${day.toString().padStart(2, '0')}`);
            }
            
            // Process each row
            data.forEach(row => {
                const district = row['District Name'];
                const block = row['Block Name'];
                
                // For each date, extract SHG and Individual loan data
                dates.forEach((date, dateIndex) => {
                    const baseIndex = 4 + (dateIndex * 8);
                    
                    // SHG Loan data
                    if (row[baseIndex] !== undefined) {
                        processedData.push({
                            district: district,
                            block: block,
                            date: date,
                            loanType: 'SHG',
                            submittedCount: row[baseIndex] || 0,
                            submittedAmount: row[baseIndex + 1] || 0,
                            sanctionedCount: row[baseIndex + 2] || 0,
                            sanctionedAmount: row[baseIndex + 3] || 0
                        });
                    }
                    
                    // Individual Loan data
                    if (row[baseIndex + 4] !== undefined) {
                        processedData.push({
                            district: district,
                            block: block,
                            date: date,
                            loanType: 'Individual',
                            submittedCount: row[baseIndex + 4] || 0,
                            submittedAmount: row[baseIndex + 5] || 0,
                            sanctionedCount: row[baseIndex + 6] || 0,
                            sanctionedAmount: row[baseIndex + 7] || 0
                        });
                    }
                });
            });
            
            return processedData;
        }

        // Initialize filter dropdowns
        function initializeFilters() {
            const districtFilter = document.getElementById('districtFilter');
            const blockFilter = document.getElementById('blockFilter');
            
            // Get unique districts
            const districts = [...new Set(rawData.map(item => item.district))].filter(Boolean);
            districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtFilter.appendChild(option);
            });
            
            // Update blocks when district changes
            districtFilter.addEventListener('change', function() {
                const selectedDistrict = this.value;
                
                // Clear block filter
                blockFilter.innerHTML = '<option value="">All Blocks</option>';
                
                if (selectedDistrict) {
                    // Get blocks for selected district
                    const blocks = [...new Set(rawData
                        .filter(item => item.district === selectedDistrict)
                        .map(item => item.block))].filter(Boolean);
                    
                    blocks.forEach(block => {
                        const option = document.createElement('option');
                        option.value = block;
                        option.textContent = block;
                        blockFilter.appendChild(option);
                    });
                }
                
                applyFilters();
            });
            
            blockFilter.addEventListener('change', applyFilters);
            document.getElementById('dateFilter').addEventListener('change', applyFilters);
        }

        // Apply filters to data
        function applyFilters() {
            const district = document.getElementById('districtFilter').value;
            const block = document.getElementById('blockFilter').value;
            const dateRange = document.getElementById('dateFilter').value;
            
            filteredData = rawData.filter(item => {
                // District filter
                if (district && item.district !== district) return false;
                
                // Block filter
                if (block && item.block !== block) return false;
                
                // Date range filter
                if (dateRange !== 'all') {
                    const itemDate = new Date(item.date);
                    
                    if (dateRange === 'august') {
                        if (itemDate.getMonth() !== 7 || itemDate.getFullYear() !== 2025) return false;
                    } else if (dateRange === 'september') {
                        if (itemDate.getMonth() !== 8 || itemDate.getFullYear() !== 2025) return false;
                    } else if (dateRange === 'last7') {
                        const sevenDaysAgo = new Date();
                        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
                        if (itemDate < sevenDaysAgo) return false;
                    }
                }
                
                return true;
            });
            
            updateDashboard();
        }

        // Update dashboard with filtered data
        function updateDashboard() {
            updateSummaryStatistics();
            updateCharts();
            updateDataTable();
        }

        // Update summary statistics
        function updateSummaryStatistics() {
            const shgData = filteredData.filter(item => item.loanType === 'SHG');
            const individualData = filteredData.filter(item => item.loanType === 'Individual');
            
            const totalShgSubmitted = shgData.reduce((sum, item) => sum + item.submittedCount, 0);
            const totalShgSanctioned = shgData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            const totalIndividualSubmitted = individualData.reduce((sum, item) => sum + item.submittedCount, 0);
            const totalIndividualSanctioned = individualData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            
            document.getElementById('totalShgSubmitted').textContent = totalShgSubmitted.toLocaleString();
            document.getElementById('totalShgSanctioned').textContent = totalShgSanctioned.toLocaleString();
            document.getElementById('totalIndividualSubmitted').textContent = totalIndividualSubmitted.toLocaleString();
            document.getElementById('totalIndividualSanctioned').textContent = totalIndividualSanctioned.toLocaleString();
        }

        // Update all charts
        function updateCharts() {
            updateDailyTrendChart();
            updateLoanDistributionChart();
            updateDistrictChart();
            updateSanctionRateChart();
        }

        // Update daily trend chart
        function updateDailyTrendChart() {
            const dates = [...new Set(filteredData.map(item => item.date))].sort();
            const shgSubmitted = [];
            const shgSanctioned = [];
            const individualSubmitted = [];
            const individualSanctioned = [];
            
            dates.forEach(date => {
                const dateData = filteredData.filter(item => item.date === date);
                const shgData = dateData.filter(item => item.loanType === 'SHG');
                const individualData = dateData.filter(item => item.loanType === 'Individual');
                
                shgSubmitted.push(shgData.reduce((sum, item) => sum + item.submittedCount, 0));
                shgSanctioned.push(shgData.reduce((sum, item) => sum + item.sanctionedCount, 0));
                individualSubmitted.push(individualData.reduce((sum, item) => sum + item.submittedCount, 0));
                individualSanctioned.push(individualData.reduce((sum, item) => sum + item.sanctionedCount, 0));
            });
            
            const ctx = document.getElementById('dailyTrendChart').getContext('2d');
            
            if (dailyTrendChart) {
                dailyTrendChart.destroy();
            }
            
            dailyTrendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'SHG Submitted',
                            data: shgSubmitted,
                            borderColor: '#4361ee',
                            backgroundColor: 'rgba(67, 97, 238, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'SHG Sanctioned',
                            data: shgSanctioned,
                            borderColor: '#7209b7',
                            backgroundColor: 'rgba(114, 9, 183, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Individual Submitted',
                            data: individualSubmitted,
                            borderColor: '#f72585',
                            backgroundColor: 'rgba(247, 37, 133, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Individual Sanctioned',
                            data: individualSanctioned,
                            borderColor: '#4cc9f0',
                            backgroundColor: 'rgba(76, 201, 240, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Daily Loan Trends'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        },
                        y: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Number of Loans'
                            }
                        }
                    }
                }
            });
        }

        // Update loan distribution chart
        function updateLoanDistributionChart() {
            const shgData = filteredData.filter(item => item.loanType === 'SHG');
            const individualData = filteredData.filter(item => item.loanType === 'Individual');
            
            const shgSubmitted = shgData.reduce((sum, item) => sum + item.submittedCount, 0);
            const shgSanctioned = shgData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            const individualSubmitted = individualData.reduce((sum, item) => sum + item.submittedCount, 0);
            const individualSanctioned = individualData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            
            const ctx = document.getElementById('loanDistributionChart').getContext('2d');
            
            if (loanDistributionChart) {
                loanDistributionChart.destroy();
            }
            
            loanDistributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['SHG Submitted', 'SHG Sanctioned', 'Individual Submitted', 'Individual Sanctioned'],
                    datasets: [{
                        data: [shgSubmitted, shgSanctioned, individualSubmitted, individualSanctioned],
                        backgroundColor: [
                            'rgba(67, 97, 238, 0.8)',
                            'rgba(114, 9, 183, 0.8)',
                            'rgba(247, 37, 133, 0.8)',
                            'rgba(76, 201, 240, 0.8)'
                        ],
                        borderColor: [
                            'rgb(67, 97, 238)',
                            'rgb(114, 9, 183)',
                            'rgb(247, 37, 133)',
                            'rgb(76, 201, 240)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Update district comparison chart
        function updateDistrictChart() {
            const districts = [...new Set(filteredData.map(item => item.district))].filter(Boolean);
            const districtStats = [];
            
            districts.forEach(district => {
                const districtData = filteredData.filter(item => item.district === district);
                const shgData = districtData.filter(item => item.loanType === 'SHG');
                const individualData = districtData.filter(item => item.loanType === 'Individual');
                
                districtStats.push({
                    district: district,
                    shgSubmitted: shgData.reduce((sum, item) => sum + item.submittedCount, 0),
                    shgSanctioned: shgData.reduce((sum, item) => sum + item.sanctionedCount, 0),
                    individualSubmitted: individualData.reduce((sum, item) => sum + item.submittedCount, 0),
                    individualSanctioned: individualData.reduce((sum, item) => sum + item.sanctionedCount, 0)
                });
            });
            
            // Sort by total loans
            districtStats.sort((a, b) => {
                const aTotal = a.shgSubmitted + a.shgSanctioned + a.individualSubmitted + a.individualSanctioned;
                const bTotal = b.shgSubmitted + b.shgSanctioned + b.individualSubmitted + b.individualSanctioned;
                return bTotal - aTotal;
            });
            
            // Take top 10 districts
            const topDistricts = districtStats.slice(0, 10);
            
            const ctx = document.getElementById('districtChart').getContext('2d');
            
            if (districtChart) {
                districtChart.destroy();
            }
            
            districtChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: topDistricts.map(d => d.district),
                    datasets: [
                        {
                            label: 'SHG Submitted',
                            data: topDistricts.map(d => d.shgSubmitted),
                            backgroundColor: 'rgba(67, 97, 238, 0.7)'
                        },
                        {
                            label: 'SHG Sanctioned',
                            data: topDistricts.map(d => d.shgSanctioned),
                            backgroundColor: 'rgba(114, 9, 183, 0.7)'
                        },
                        {
                            label: 'Individual Submitted',
                            data: topDistricts.map(d => d.individualSubmitted),
                            backgroundColor: 'rgba(247, 37, 133, 0.7)'
                        },
                        {
                            label: 'Individual Sanctioned',
                            data: topDistricts.map(d => d.individualSanctioned),
                            backgroundColor: 'rgba(76, 201, 240, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Top Districts by Loan Activity'
                        }
                    },
                    scales: {
                        x: {
                            stacked: false
                        },
                        y: {
                            stacked: false,
                            title: {
                                display: true,
                                text: 'Number of Loans'
                            }
                        }
                    }
                }
            });
        }

        // Update sanction rate chart
        function updateSanctionRateChart() {
            const shgData = filteredData.filter(item => item.loanType === 'SHG');
            const individualData = filteredData.filter(item => item.loanType === 'Individual');
            
            const shgSubmitted = shgData.reduce((sum, item) => sum + item.submittedCount, 0);
            const shgSanctioned = shgData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            const individualSubmitted = individualData.reduce((sum, item) => sum + item.submittedCount, 0);
            const individualSanctioned = individualData.reduce((sum, item) => sum + item.sanctionedCount, 0);
            
            const shgRate = shgSubmitted > 0 ? (shgSanctioned / shgSubmitted) * 100 : 0;
            const individualRate = individualSubmitted > 0 ? (individualSanctioned / individualSubmitted) * 100 : 0;
            
            const ctx = document.getElementById('sanctionRateChart').getContext('2d');
            
            if (sanctionRateChart) {
                sanctionRateChart.destroy();
            }
            
            sanctionRateChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['SHG Loans', 'Individual Loans'],
                    datasets: [{
                        label: 'Sanction Rate (%)',
                        data: [shgRate, individualRate],
                        backgroundColor: [
                            'rgba(67, 97, 238, 0.7)',
                            'rgba(247, 37, 133, 0.7)'
                        ],
                        borderColor: [
                            'rgb(67, 97, 238)',
                            'rgb(247, 37, 133)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Sanction Rate by Loan Type'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Sanction Rate: ${context.raw.toFixed(2)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Sanction Rate (%)'
                            }
                        }
                    }
                }
            });
        }

        // Update data table
        function updateDataTable() {
            const tableBody = document.querySelector('#loanTable tbody');
            tableBody.innerHTML = '';
            
            // Group data by district, block, date, and loan type
            const groupedData = {};
            
            filteredData.forEach(item => {
                const key = `${item.district}|${item.block}|${item.date}|${item.loanType}`;
                if (!groupedData[key]) {
                    groupedData[key] = {
                        district: item.district,
                        block: item.block,
                        date: item.date,
                        loanType: item.loanType,
                        submittedCount: 0,
                        submittedAmount: 0,
                        sanctionedCount: 0,
                        sanctionedAmount: 0
                    };
                }
                
                groupedData[key].submittedCount += item.submittedCount;
                groupedData[key].submittedAmount += item.submittedAmount;
                groupedData[key].sanctionedCount += item.sanctionedCount;
                groupedData[key].sanctionedAmount += item.sanctionedAmount;
            });
            
            // Convert to array and sort
            const tableData = Object.values(groupedData);
            tableData.sort((a, b) => {
                if (a.district !== b.district) return a.district.localeCompare(b.district);
                if (a.block !== b.block) return a.block.localeCompare(b.block);
                if (a.date !== b.date) return a.date.localeCompare(b.date);
                return a.loanType.localeCompare(b.loanType);
            });
            
            // Add rows to table
            tableData.forEach(item => {
                const row = document.createElement('tr');
                
                // Apply color coding based on loan type
                if (item.loanType === 'SHG') {
                    row.style.backgroundColor = 'rgba(67, 97, 238, 0.05)';
                } else {
                    row.style.backgroundColor = 'rgba(247, 37, 133, 0.05)';
                }
                
                row.innerHTML = `
                    <td>${item.district}</td>
                    <td>${item.block}</td>
                    <td>${item.date}</td>
                    <td>${item.loanType}</td>
                    <td>${item.submittedCount.toLocaleString()}</td>
                    <td>${formatCurrency(item.submittedAmount)}</td>
                    <td>${item.sanctionedCount.toLocaleString()}</td>
                    <td>${formatCurrency(item.sanctionedAmount)}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Format currency values
        function formatCurrency(amount) {
            if (amount >= 10000000) {
                return '₹' + (amount / 10000000).toFixed(2) + ' Cr';
            } else if (amount >= 100000) {
                return '₹' + (amount / 100000).toFixed(2) + ' L';
            } else if (amount >= 1000) {
                return '₹' + (amount / 1000).toFixed(2) + ' K';
            } else {
                return '₹' + amount;
            }
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
